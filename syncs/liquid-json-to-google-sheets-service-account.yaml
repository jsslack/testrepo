model: liquid-json
destination: google-sheets-service-account
config:
  mode: mirror
  mappings:
    - to: json_column
      from: json_column
      type: standard
    - to: liquidity
      type: template
      template: |-
        {%- assign metricsArray = '[]' | parse -%}
        {%- assign finalMetrics = metricsArray -%}

        {%- for metric in row.json_column -%}
          {%- assign renamed = '{}' | parse | json_construct:
            'budgetName',  metric.BUDGET_NAME,
            'budgetDate',  metric.BUDGET_DATE,
            'budgetCount', metric.BUDGET_COUNT
          -%}
          {%- assign finalMetrics = finalMetrics | concat: renamed -%}
        {%- endfor -%}

        {{ finalMetrics }}
  sheetName: Sheet1
  configVersion: 1
  spreadsheetId: 1Ike-gaELpQOkRyaL9nHmwKfb6xxFrXwf0mYLWuVclK0
  sheetSelection: select
  autoSyncColumns: false
schedule:
  type: manual
schedulePaused: false
